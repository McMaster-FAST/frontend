x-nextjs-service: &nextjs-service
  build:
    context: .
    dockerfile: Dockerfile
    target: dev
  volumes:
    - .:/app
    - /app/node_modules
    - /app/.next
  env_file:
    - .env.local
  environment:
    - NODE_ENV=development
    - NEXT_TELEMETRY_DISABLED=1
    - WATCHPACK_POLLING=true
  restart: unless-stopped

name: mac-fast-frontend-dev
services:
  web:
    <<: *nextjs-service
    ports:
      - "3000:3000"

networks:
  default:
    driver: bridge
    ipam:
      config:
        - subnet: 172.21.0.0/16
